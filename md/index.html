<!doctype html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" initial-scale="1"/>
    <title>Marked in the browser</title>
  <link href="default.css" rel="stylesheet" />
    <link href="github-md.css" rel="stylesheet" />
    <script src="github-md.js"></script>
    <script src="tex-chtml.js"></script>
    <script src="jquery.min.js"></script>
    <script src="jquery.qrcode.min.js"></script>
</head>

<body>
    <div id="header"><div>By 折戟沉沙。丿</div></div>
    <div id="content"></div>
    <div id="footer">
        <div class="qrc">
            <div id="qrcode"></div>
            <div class="md-download"><a href="javascript:d()">点击下载</a></div>
        </div>
    </div>
    <script src="marked.min.js"></script>
    <script>
        let val = "",
        url = "";
//         val = `# 简历

// ## 个人信息
// - 姓名：李田所
// - 年龄：24岁
// - 性别：男
// - 学历：本科
// - 毕业时间：2023年6月
// - 专业：新闻传播学

// ## 联系方式
// - 手机号码：13912345678
// - 邮箱：litiansuo@email.com

// ## 求职意向
// - 应聘岗位：科技新闻编辑
// - 求职公司：HOMO之家

// ## 教育背景
// - 学校：某大学
// - 时间：2019年-2023年
// - 专业：新闻传播学

// ## 工作经历
// - 公司：某会员制餐厅
// - 时间：2020年-2021年
// - 职位：服务员

// ## 爱好
// - 喜欢喝红茶
// - 经常健身`
        
        if (!val) {
            const tex = location.search;
            if (tex.startsWith('?tex=')) {
                val = decodeURI(atob(tex.substr(5)));
            }
        }
        if (!url) {
            url = "https://bincooo.github.io/vuepress-doc";
        }

        val = val.replaceAll(/([^$]{1})\$([^$]{1,})\$/g, '$$$$$2$$$$');
        document.getElementById('content').innerHTML=marked.parse(val);
        hljs.highlightAll();
        MathJax.typeset();
        let codes = document.querySelectorAll('code');
        codes.forEach(item => {
            let lang = item.classList[0]?.split('-')[1];
            if (lang) {
              item.title = `[lang: ${lang}]`;
            }
        });
        $('#qrcode').qrcode({
            width: 120,
            height: 120,
            background: "#f0f0f0",//背景颜色  
            foreground: "#000000", //前景颜色
            correctLevel :0,//纠错等级 
            text: url
        });

        function download(filename, text) {
          var element = document.createElement('a');
          element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
          element.setAttribute('download', filename);
          element.style.display = 'none';
          document.body.appendChild(element);
          element.click();
          document.body.removeChild(element);
        }

        function d() {
            download('marked.md', val);
        }
        // console.log('https://bincooo.github.com/qrcode?tex=' + btoa(encodeURI(val)))
    </script>
</body>

</html>
